#############################################################################
## 1. OPENAPI
#############################################################################
openapi: 3.0.2

#############################################################################
## 2. INFO
#############################################################################
info:
  version: 1.0.0
  title: Common Private Schema (Data Type) Definitions
  contact:
    name: MonE Product Development
    
  license:
    name: GNU AGPLv3
    url: https://www.gnu.org/licenses/agpl-3.0.en.html
  description: |
    <!-- Note that this description is a MARKDOWN Block -->

    **This Open API specification does NOT contain any valid PATHS/OPERATIONS!!!. It ONLY contains COMMON SCHEMA (TYPE) DEFINITIONS referred by other API specifications.**

    Thus, in this context COMMON SCHEMA (TYPE) DEFINITIONS mean shared entity models or baseline objects that can be reused with or without extension.
#############################################################################
## 3. SERVERS
#############################################################################

servers:
  - url: https://{environment}.monetizehub.io:{port}/private/COMMON_TYPE_DEFINITION
    description: The production API server
    variables:
      environment:
        enum:
          - 'dev'
          - 'test'
          - 'staging'
          - ''
        default: 'dev'
      port:
        enum:
          - '443'
          - '8443'
        default: '443'
      version:
        default: 'v1'

#############################################################################
## 4. PATHS
#############################################################################
paths:
  /readMe:
    get:
      summary: This is a placeholder nouse operation. (to bypass Swagger UI limitation of a specification with ONLY data models without operation)
      operationId: readMe
      responses:
        default:
          description: default response
          content:
            '*/*':
              schema:
                type: string


#############################################################################
## 5. COMPONENTS
#############################################################################
components:

#############################################################################
## 5.x. SECURITY SCHEMES
#############################################################################
  securitySchemes:
    JWT_Bearer:
      type: http
      scheme: bearer 
      bearerFormat: JWT
    IAM_OAuth:
      type: oauth2
      description: |
        **OAuth Grant Type: Password Credentials**
      flows:
        password:
          tokenUrl: https://iam.monetizehub.io/oauth/v1/token
          scopes:
            write:resources: modify resources
            read:resources: read resources

#############################################################################
## 5.x. SCHEMA DEFINITIONS
#############################################################################
  schemas:

## ******************************************************************************************
## !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
## !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
## BELOW CONSIDERED BASIC TYPES
## !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
## !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
## ******************************************************************************************

    String:
      type: string

    Boolean:
      type: boolean

    Int32:
      type: integer
      description: |
        Signed 32-bit integer
        
        minValue: -(2^31)  : -2147483648
        
        maxValue:  (2^31)-1:  2147483647
      format: int32
      example: 11

    Int64:
      type: integer
      description: |
        Signed 64-bit integer
        
        minValue: -(2^63)  : -9223372036854775808
        
        maxValue:  (2^63)-1:  9223372036854775807
      format: int64
      example: 11111
      

    UInt32:
      type: integer
      description: |
        Unsigned 32-bit integer
        
        minValue:  (2^0)-1 : 0
        
        maxValue:  (2^32)-1: 4294967295
      format: int32
      minimum: 0
      example: 5

    UInt64:
      type: integer
      description: |
        Unsigned 64-bit integer
        
        minValue: (2^0)-1  : 0
        
        maxValue:  (2^64)-1: 1.844674407370955e19
      format: int64
      minimum: 0      
      example: 11111

    Float:
      type: number
      description: |
        32-bit IEEE floating point number
        
        minValue: 1.4e-45
        
        maxValue: 3.4028235e38
      format: float
      example: 122.25

    Double:
      type: number
      description: |
        64-bit IEEE floating point number
        
        minValue: 4.9e-324
        
        maxValue: 1.7976931348623157e308
      format: double
      example: 12.17171

    Octet:
      type: string
      description: |
        Any sequence of octets
      format: binary

    Base64:
      type: string
      description: |
        Base64 encoded characters
      format: byte


    Date:
      type: string
      description: |
        RFC 3339 Date Type.

        Valid example(s):
        * 2019
        * 2019-10
        * 2019-10-30
      
      format: date
      example: "2019-10-30"

    DateTime:
      type: string
      description: |
        RFC 3339 DateTime Type.

        Valid example(s): In the following T can be a space.         
        * 1997-07-16T19:20      (Complete date plus hours and minutes)
        * 1997-07-16T19:20:30   (Complete date plus hours and minutes and seconds)
        * 1997-07-16T19:20+01:00  (Complete date plus hours and minutes with OFFSET)
        * 1997-07-16T19:20:30+01:00 (Complete date plus hours and minutes and seconds with OFFSET)
        * 1997-07-16T19:20:30.362+01:00 (Complete date plus hours and minutes and seconds and milliseconds with OFFSET)
      format: date-time
      example: "1997-07-16 19:20:30.123"

    TimeZone:
      type: string
      description: |
        Timezone in the following format(s):
        
        * EST
        * EST5EDT
        * America/WhiteHorse
  
      example: "PST"


    StrDate:
      type: string
      description: |
        Simple

        * 2019-10-10
        
      minLength: 10
      maxLength: 10
      pattern: '([\d]{4})\-([\d]{2})\-([\d]{2})'
      example: "2019-10-10"
            
    StrDateTime:
      type: string
      description: |
        Date time type.
        Valid example(s):

        * 2019-10-10
        * 2019-10-10 22:00:00
        * 2019-10-10 22:00:00.1
        * 2019-10-10 22:00:00.12
        * 2019-10-10 22:00:00.123
        
      minLength: 10
      maxLength: 19
      pattern: '([\d]{4})\-([\d]{2})\-([\d]{2})(\ ([0-2][0-9]):([0-5][0-9]):([0-5][0-9])(\.([\d]{1,3}))?)?'
      example: "2019-10-10 12:00:00"

    Email:
      type: string
      description: 'Type for EMAIL addresses (RFC 5322, section 3.4.1)'
      format: email
      default: john.doe@operator.com
      example: john.doe@operator.com

    IPv4:
      type: string
      description: 'Type for IP ver 4 addresses (RFC 2673, section 3.2)'
      format: ipv4
      default: 192.168.10.10
      example: 192.168.10.10

    IPv6:
      type: string
      description: 'Type for IP version 6 style addresses (RFC 2373, section 2.2)'
      format: ipv6
      default: '2001:0db8:85a3:0000:0000:8a2e:0370:7334'
      example: '2001:0db8:85a3:0000:0000:8a2e:0370:7334'


    Hostname:
      type: string
      description: 'Type for HOSTNAME definitions (RFC 1034, section 3.1)'
      format: hostname
      example: server.t-mobile.com
  
    Uri:
      type: string
      description: Type for URI definitions (RFC 3986)
      format: uri
      default: 'dummyuri:oasis:names:specification:xml:4.1.2'
      example: 'dummyuri:oasis:names:specification:xml:4.1.2'


    Url:
      type: string
      description: Baseline type for URL definitions (RFC 3986)
      format: uri
      default: 'http://www.ietf.org/rfc/rfc2396.txt'
      example: 'http://www.ietf.org/rfc/rfc2396.txt'





## ******************************************************************************************
## !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
## !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
## BELOW CONSIDERED COMPLEX DATA TYPES (STILL DATA TYPES w/RESTRICTIONs, BUT NOT OBJECTS)
## !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
## !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
## ******************************************************************************************
  
    Msisdn:
      type: string
      description: |
        Type for Mobile Subscriber ISDN Number (ITU-T E.164 Numbering Plan)

        Valid examples:

        * 14257751615 International
        * +1-541-754-3010 International
        * +1-(541)-754-3010 International
        * 1-541-754-3010  International dialed in the US

      minLength: 10
      maxLength: 19
      pattern: '\+?([\d]{1,3})?\-?\(?([\d]{3})\)?\s*\-?([\d]{3})\-?([\d]{4,6})'
      default: 14257751615
      example: "14257751615"

    PhoneNumber:
      type: string
      description: |
        Type for Mobile Subscriber ISDN Number (ITU-T E.164 Numbering Plan)

        Valid examples:

        * 14257751615 International
        * +1-541-754-3010 International
        * +1-(541)-754-3010 International
        * 1-541-754-3010  International dialed in the US
        * 425-623-3777 National format
        * 4256233777 National format
        * 425-6237777 National format

    MsisdnInternational:
      type: string
      description: |
        Type for Mobile Subscriber ISDN Number (ITU-T E.164 Numbering Plan)

        Valid examples:

        * 14257751615 International
        * +1-541-754-3010 International
        * +1-(541)-754-3010 International
        * 1-541-754-3010  International dialed in the US
        * 425-623-3777 National format
        * 4256233777 National format
        * 425-6237777 National format

      minLength: 11
      maxLength: 19
      pattern: '\+?([\d]{1,3})\-?\(?([\d]{3})\)?\s*\-?([\d]{3})\-?([\d]{4,6})'
      default: 14257751615
      example: "14257751615"
      
    MsisdnDomestic:
      type: string
      description: |
        Type for Mobile Subscriber ISDN Number (ITU-T E.164 Numbering Plan)

        Valid examples:
        * 754-3010  Local
        * (541) 754-3010  Domestic
        * 541-754-3010  Domestic
        * 541-7543010 Domestic
        * 5417543010  Domestic
      minLength: 10
      maxLength: 14
      pattern: '\(?([\d]{3})?\)?\s*\-?([\d]{3})\-?([\d]{4})'
      default: 5417543010
      example: "5417543010"

#############################################################################      
    Imsi:
      type: string
      description: |
        Type for International Mobile Subscriber Identity (ITU-T E.212 Numbering Plan)

        Valid examples: IMSI:310250123456789

        * MCC:  310   USA
        * MNC:  250   T-Mobile
        * MSIN: 1234567890
      minLength: 14
      maxLength: 15
      pattern: '([\d]{3})([\d]{2,3})([\d]{9,10})'
      default: 310250123456789
      example: "310250123456789"

#############################################################################      
    Vimsi:
      type: string
      description: |
        Type for International Mobile Subscriber Identity (ITU-T E.212 Numbering Plan)

        Valid examples: IMSI:310250123456789

        * MCC:  310   USA
        * MNC:  250   T-Mobile
        * MSIN: 1234567890
      minLength: 14
      maxLength: 15
      pattern: '([\d]{3})([\d]{2,3})([\d]{9,10})'
      default: 310250123456789
      example: "310250123456789"
      
#############################################################################
    Iccid:
      type: string
      description: |
        Integrated Circuit Card Identifier (ITU E.118)

        The format of the ICCID is: MMCC IINN NNNN NNNN NN C x
        * MM = Constant (ISO 7812 Major Industry Identifier)
        * CC = Country Code
        * II = Issuer Identifier
        * N{12} = Account ID ("SIM number")
        * C = Checksum calculated from the other 19 digits using the Luhn algorithm.
        * x = An extra 20th digit is returned by the 'AT!ICCID?' command, but it is not officially part of the ICCID.

        Valid example:
        * ICCID: 8948061091006463015
      minLength: 19
      maxLength: 19
      pattern: '([\d]{2})([\d]{2})([\d]{2})([\d]{12})([\d]{1})([\d]?)'
      default: 8901260952114929415
      example: "8901260952114929415"
#############################################################################
    Imei:
      type: string
      description: |
        International Mobile Equipment Identity (3GPP TS 23.003)

        Valid examples:
        * IMEI code   35-209900-176148-1
        * IMEISV code 35-209900-176148-23
        * IMEI        3520990017614812
      minLength: 15
      maxLength: 19
      pattern: '([\d]{2})\-?([\d]{6})\-?([\d]{6})\-?([\d]{1,2})'
      default: 3520990017614812
      example: "3520990017614812"


## ******************************************************************************************
## !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
## !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
## BELOW ARE COMPOSITE DATA TYPE (OBJECT)
## !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
## !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
## ******************************************************************************************

    ValueType:
      description: |
        Describes the valueType of an object attribute<br>
        For example: Characteristic.valueType=Int32 when Characteristic.value is of type Int32

      type: string
      enum: 
        - String
        - Boolean
        - Int32
        - Int64
        - UInt32
        - UInt64
        - Float
        - Double
        - Octet
        - Base64
        - Date
        - DateTime
        - Email
        - IPv4
        - IPv6
        - Hostname
        - Uri
        - Url
        - Msisdn
        - Iccid
        - Imsi
        - Imei
        
    DurationPeriodType:
      description:
        Period Type
      type: string
      enum:
        - "day"
        - "week"
        - "month"
        - "year"
        - "billcycle"

    BillingPeriodType:
      description:
        Period Type
      type: string
      enum:
        - "day"
        - "week"
        - "month"
        - "year"

    BillStateType:
      description:
        Bill State
      type: string
      enum:
        - "new"
        - "onHold"
        - "validated"
        - "sent"
        - "partiallyPaid"
        - "settled"

    BillRunType:
      description:
        Bill Run
      type: string
      enum:
        - "ondemand"        
        - "batchBill.oncycle"
        - "batchBill.offcycle"
        - "hotBill.oncycle"
        - "hotBill.offcycle"

    RecurringChargePeriodType:
      description:
        Period Type
      type: string
      enum:
        - "day"
        - "week"
        - "month"
        - "year"

    RecurringPeriodType:
      description:
        Period Type
      type: string
      enum:
        - "day"
        - "week"
        - "month"
        - "year"


    DurationQuantity:
      description: 
        Duration Quantity that specifies a duration amount
      type: object
      properties:
        amount:
          description: |
            Duration during which the alteration applies on the order item
            price (for instance 2 months)
          type: integer
        units:
          $ref: "#/components/schemas/DurationPeriodType"

      required:
        - amount 
        - unit

    PaymentStatus:
      description:
        Payment Status Type
      type: string
      enum:
        - "pendingAuthorization"
        - "authorized"
        - "captured"
        - "failed"
        - "canceled"
        - "denied"
        - "done"


    PaymentPlanStatusType:
      description:
        Status of the payment plan (effective, ineffective)
      type: string
      enum:
        - "effective"
        - "ineffective"

    RequestStateValues:
      type: "string"
      description: ""
      enum:
        - "accepted"
        - "rejected"
        - "inprogress"
        - "done"
        - "failed"


    AccountRelationType:
      description:
        Account Type
      type: string
      enum:
        - "b2c"
        - "b2b"

    AccountType:
      description:
        Account Type
      type: string
      enum:
        - "individual"
        - "soleproprietorship"
        - "partnership"
        - "limitedpartnership"
        - "llc"
        - "s-corp"
        - "c-corp"
        - "non-profit"
        - "co-op"

    AccountRatingType:
      description:
        Account Rating Type
      type: string
      enum:
        - "prepaid"
        - "postpaid"
        - "postpaid.recurrentInAdvance"

    AccountBalanceType:
      description:
        Account Balance Type
      type: string
      enum:
        - "credit"
        - "spendingWallet"
        - "deposit"
        - "advancePayment"
        - "loyaltyPoints"

    OnlineChargingBalanceType:
      description:
        Account Balance Type
      type: string
      enum:
        - "mainWallet"
        - "freeUnits"
        - "complexDiscounts"
        - "costControl"

    AccountContactType:
      description:
        Account Contact Type
      type: string
      enum:
        - "billing"
        - "primary"
        - "secondary"

    ContactMediumType:
      description:
        Contact Medium Type
      type: string
      enum:
        - "postal"
        - "email"
        - "telephone"
        - "fax"
        - "socialNetwork"

    MediumCharacteristicContactType:
      description:
        Medium Characteristic Contact Type
      type: string
      enum:
        - "postal"
        - "postal.home"
        - "postal.office"
        - "email"
        - "telephone"
        - "telephone.mobile"
        - "telephone.home"
        - "telephone.office"
        - "fax"
        - "socialNetwork"

    AccountPaymentStatus:
      description:
        Payment Status Type
      type: string
      enum:
        - "null"
        - "awaiting"
        - "due"
        - "paid"
        - "paid-in arrears"
        - "bad debt"

    AppliedCustomerBillingRateItemType:
      description:
        Bill Rate Item Type (Billing Rate)
      type: string
      enum:
        - onetime
        - recurrent
        - usage
        - allowance
        - alteration
        - discount
        - penalty
        - total



    PriceType:
      description: |
        A category that describes the price such as recurring, one time and usage.
      type: string
      enum:
        - onetime
        - recurrent
        - usage
        - allowance
        - alteration
        - discount
        - penalty
        - total


    AccountStateType:
      description:
        Account Type
      type: string
      enum:
        - "inactive"
        - "active"
        - "suspended"
        - "deleted"

    UnitType:
      description:
        Unit of Measurement Class
      type: string
      enum:
        - "monetary"
        - "time"
        - "count"
        - "data"
        - "length"
        - "area"
        - "volume"
        - "weight"
        - "power"
        - "pressure"
        - "speed"
        - "temperature"

    UnitOfMeasure:
      description:
        Unit of Measure
      type: string
      enum: [ 
          "AED", "AFN", "ALL", "AMD", "ANG", "AOA", "ARS", "AUD", "AWG", "AZN", 
          "BAM", "BBD", "BDT", "BGN", "BHD", "BIF", "BMD", "BND", "BOB", "BOV", "BRL", "BSD", "BTN", "BWP", "BYN", "BZD", 
          "CAD", "CDF", "CHE", "CHF", "CHW", "CLF", "CLP", "CNY", "COP", "COU", "CRC", "CUC", "CUP", "CVE", "CZK", 
          "DJF", "DKK", "DOP", "DZD", "EGP", "ERN", "ETB", "EUR", "FJD", "FKP", 
          "GBP", "GEL", "GHS", "GIP", "GMD", "GNF", "GTQ", "GYD", "HKD", "HNL", "HRK", "HTG", "HUF", 
          "IDR", "ILS", "INR", "IQD", "IRR", "ISK", "JMD", "JOD", "JPY", 
          "KES", "KGS", "KHR", "KMF", "KPW", "KRW", "KWD", "KYD", "KZT", "LAK", "LBP", "LKR", "LRD", "LSL", "LYD", 
          "MAD", "MDL", "MGA", "MKD", "MMK", "MNT", "MOP", "MRU", "MUR", "MVR", "MWK", "MXN", "MXV", "MYR", "MZN", 
          "NAD", "NGN", "NIO", "NOK", "NPR", "NZD", "OMR", "PAB", "PEN", "PGK", "PHP", "PKR", "PLN", "PYG", "QAR", 
          "RON", "RSD", "RUB", "RWF", 
          "SAR", "SBD", "SCR", "SDG", "SEK", "SGD", "SHP", "SLL", "SOS", "SRD", "SSP", "STN", "SVC", "SYP", "SZL", 
          "THB", "TJS", "TMT", "TND", "TOP", "TRY", "TTD", "TWD", "TZS", 
          "UAH", "UGX", "USD", "USN", "UYI", "UYU", "UYW", "UZS", "VES", "VND", "VUV", "WST", 
          "XAF", "XAG", "XAU", "XBA", "XBB", "XBC", "XBD", "XCD", "XDR", "XOF", "XPD", "XPF", "XPT", "XSU", "XTS", "XUA", "XXX", "YER", "ZAR", "ZMW", "ZWL",

          "ms", "sec", "min", "hr", "day", "week", "month", "year", "decade", "century", "billcycle",

          "sms", "mms", "itemCount",

          "bit", "b", "Kb", "Mb", "Gb", "Tb",   

          "km", "m", "dm", "cm", "mm", "mile", "yard", "ft", "in", "nmile",
          "km2", "m2", "dm2", "cm2", "mm2", "mile2", "yd2", "ft2", "in2", "hectare", "are", "acre",
          "lt", "dm3", "dl", "cl", "ml", "cm3", "mm3", "yd3", "ft3", "in3", "barrel", "gal", "floz", "pint", "quart",  "ukbarrel", "ukgal", "ukfloz", "ukpint", "ukquart",

          "ton", "kg", "gr", "ct", "mg", "lb", "oz", "uston", "ukton", "st",

          "W", "kW", "hp", "btuh",

          "atm", "bar", "mbar", "Pa", "KPa", "MPa", "psf", "psi",

          "km/h", "m/h", "m/s", "mp/h", "ft/min", "ft/s", "knot", "mach(a)", "mach(w)", "light",

          "C", "F", "K", "Ra"

      ]



#############################################################################
## ENTITY
#############################################################################


    RelatedEntityRefWithRole:
      $ref: "#/components/schemas/RelatedEntity"


#############################################################################
## VERSIONED ENTITY
#############################################################################


    VersionedEntity:
      description: 
        Versioned Entity

      allOf:
        - $ref: "#/components/schemas/Entity"
        - type: object
          required:
            - version    
            - validFor      
          properties:
            version:
              description: 
                Version of the Entity
              type: string
              example: "1.0"
            validFor:
              description: 
                The period for which the entity is valid
              $ref: "#/components/schemas/TimePeriod"


    VersionedEntityRef:
      description: 
        Versioned EntityRef

      allOf:
        - $ref: "#/components/schemas/EntityRef"
        - type: object
          required:
            - version
            - validFor
          properties:
            version:
              description: 
                Version of the Entity
              type: string
              example: "1.0"
            validFor:
              description: 
                The period for which the entity is valid
              $ref: "#/components/schemas/TimePeriod"



    VersionedRelatedEntityRef:
      description: 
        Versioned EntityRef

      allOf:
        - $ref: "#/components/schemas/EntityRef"
        - type: object
          properties:
            version:
              description: 
                Version of the Entity
              type: string
              example: "1.0"
      required:
        - id
        - version


    VersionedRelatedEntityRefWithRole:
      description: 
        Root schema for use in MonE Open-APIs.<br>
        Root of all Related Entity Objects that shows the relation with a mandatory **role**
        (TMFORUM RelatedEntity)

      allOf:
        - $ref: "#/components/schemas/EntityRef"
        - type: object
          properties:
            version:
              description: 
                Version of the Entity
              type: string
              example: "1.0"
            role:
              description: The role of an entity.
              type: string
      required:
        - id 
        - version
        - role






#############################################################################

    EventCorrelationContext:
      description: |
         Event to Web Service CorrelationContext
      type: object
      properties:
        site:
          type: string
          description: "Calling Client Site info for correlation purposes"
          example: "West-Coast"
        company:
          type: string
          description: "Calling Client Company Identifier info for correlation purposes"
          example: "Acme-Corp"
        channel:
          type: string
          description: "Calling Client Channel info for correlation purposes"
          example: "Walmart"
        application:
          type: string
          description: "Calling Client Application Name info for correlation purposes"
          example: "Billing-SystemX"
        user:
          type: string
          description: "User Identifer for the Calling Application info for correlation purposes"
          example: "User-X"
        sessionId:
          type: string
          description: "11111111-1111-1111-1111-111111111111"
          example: "11111111-1111-1111-1111-111111111111"
        businessInteractionId:
          type: string
          description: "11111111-1111-1111-1111-111111111111"
          example: "11111111-1111-1111-1111-111111111111"
        transactionId:
          type: string
          description: "11111111-1111-1111-1111-111111111111"
          example: "11111111-1111-1111-1111-111111111111"


#############################################################################

    ErrorContext:
      description: |
        Error Context. For details, please refer to:<br>
        [API Guidelines:Error Representation](/INTERFACES/API-GUIDELINES/start-42_methods_responses/#4-error-representation) 

      allOf:
        - $ref: "#/components/schemas/Entity"
        - type: object 
          properties:
            code:
              type: "string"
              description: |
                Application relevant detail, defined in the API or a common list.
            reason:
              type: "string"
              description: |
                Explanation of the reason for the error which can be shown to a client user.
            message:
              type: "string"
              description: |
                More details and corrective actions related to the error which can be shown to a client user."
            status:
              type: "string"
              description: |
                HTTP Error Code extension
            referenceError:
              description: |
                URI/URL of documentation describing the error.
              type: "string"
              format: "uri"
            domain:
              description: |
                Domain of the error
              type: string
              example: "Charging"
            source:
              description: |
                Component name that raised the error
              type: string
              example: "MonE_Pchg_Rf"
            locationType:
              type: string
              example: "request.parameter"
            location:
              type: string
              example: "If available more details on the location of the error."

    EmspErrorContext:
      type: object
      description: |
        Event/Message Streaming Platform Error Context.
      properties:
        code:
          type: "string"
          description: |
            Application relevant detail, defined in the API or a common list.
        reason:
          type: "string"
          description: |
            Explanation of the reason for the error which can be shown to a client user.
        message:
          type: "string"
          description: |
            More details and corrective actions related to the error which can be shown to a client user."



#############################################################################

    Event:
      description: "Event with common attributes"
      allOf:
        - $ref: "#/components/schemas/TMFEvent"
        - type: object
          properties:
            notificationType:
              description: "The type of the event notification"
              type: string
              enum:
                - entity.create
                - entity.update
                - entity.delete
                - entity.stateChange
                - task.completed
                - task.failed
                - task.charging.completed
                - task.charging.failed
                - task.hotbilling.completed
                - task.hotbilling.failed
            requestType:
              description: "The type of the event request."
              type: string
              enum:
                - offlineCharging.create
                - offlineCharging.update
                - offlineCharging.release
                - onlineCharging.create
                - onlineCharging.update
                - onlineCharging.release
                - reverseCharging
                - adviceOfCharge
                - tariffRequest
            target:
              description: "Destination Entity of the Event"
              $ref:  "#/components/schemas/EntityRef"
            relatedParty:
              type: array
              items:
                $ref:  "#/components/schemas/RelatedEntityRef"
            eventCorrelationContext:
              description: "Event Correlation Context details"
              $ref:  "#/components/schemas/EventCorrelationContext"
            errorContext:
              description: "Event Error Context details"
              $ref:  "#/components/schemas/ErrorContext"


#############################################################################

    PropertyValue:
      description:
        Property Value
      type: object
      properties:
        valueType:
          $ref: "#/components/schemas/ValueType"
        value:
          type: string
          example: "valueAsString"
        unitType:
          $ref: "#/components/schemas/UnitType"
        units:
          $ref: "#/components/schemas/UnitOfMeasure"

    ObjectPropertyKey:
      description:
        Apache PropertyUtils style reflection based property key.
        Refer to <br> 
        static Object getProperty(Object bean, String name) of Apache PropertyUtils
      type: object
      properties:
        objectName:
          description: 
            Entry point  name of bean whose property is to be extracted
          type: string
        propertyName:
          description: 
            The property/attribute/field name of the value in the object
          type: string

    CollectionPropertyKey:
      description:
        Collection Item Accessor
      type: object
      properties:
        collectionName:
          description: Collection Name
          type: string
          enum:
            - qualifierCollection
            - quantifierCollection
          default: qualifierCollection
        sequenceNo:
          description: Provided if more than one instance of the same objectName is added to a collection
          type: integer
          default: 0
        objectName:
          description: 
            The type of the object
          type: string
          example: "SERVED_PARTY"
        propertyName:
          description: 
            The property/attribute/field name of the value in the object
          type: string
          example: "MSISDN"


    CollectionItemKey:
      description:
        Collection Key
      type: object
      properties:
        sequenceNo:
          description: Provided if more than one instance of the same objectName is added to a collection
          type: integer
          default: 0
        objectName:
          description: 
            The type of the object
          type: string
          example: "SERVED_PARTY"
        name:
          description: 
            The property/attribute/field name of the value in the object
          type: string
          example: "MSISDN"

    CollectionItemValue:
      description:
        Collection Value
      type: object
      properties:      
        valueType:
          $ref: "#/components/schemas/ValueType"
        value:
          type: string
          example: "valueAsString"
        unitType:
          $ref: "#/components/schemas/UnitType"
        units:
          $ref: "#/components/schemas/UnitOfMeasure"


    CollectionItem:
      description:
        Collection Item
      type: object
      properties:
        key:
          $ref: '#/components/schemas/CollectionItemKey'
        value:
          $ref: '#/components/schemas/CollectionItemValue'


    Collection:
      type: array
      items:
        $ref: '#/components/schemas/CollectionItem'





#######################################################################
## PiA Rules
#######################################################################


    DecisionTree:
      description: 
        MonE DecisionTree Type.

      allOf:
        - $ref: "#/components/schemas/VersionedEntityRef"
        - type: object
          properties: 
            rule:
              type: array
              items: 
                $ref: "#/components/schemas/Rule"
            result:
              type: array
              items: 
                $ref: "#/components/schemas/RuleResult"
          required:
            - rule


    DecisionTreeRef:
      description: 
        Reference. DecisionTree.
      allOf:
        - $ref: "#/components/schemas/VersionedEntityRef"


    RuleSet:
      description: |
        MonE RuleSet Type.
      allOf:
        - $ref: "#/components/schemas/VersionedEntityRef"
        - type: object
          properties: 
            rule:
              type: array
              items: 
                $ref: "#/components/schemas/Rule"
            result:
              type: array
              items: 
                $ref: "#/components/schemas/RuleResult"

    RuleSetRef:
      description: 
        Reference. RuleSet.
      allOf:
        - $ref: "#/components/schemas/VersionedEntityRef"


    Rule:
      description: |
        MonE Rules/DecisionTree Rule Type.<br>
      type: object
      properties: 
        name: 
          type: string
          example: "ruleX"
        branchName: 
          type: string
          example: "ruleX.branch1"
        type:
          description: |
            Can be one of: IF | FOR | FORSOME | FORNONE | FORONE
          type: string
          pattern: '(IF)|(FORALL)|(FORSOME)|(FORNONE)|(FORONE)'
          example: "IF"
        condition:
          type: array
          items:
            type: string
          example: [ 
              "CDS.quantifierMap.get(\"CUSTOMER_INFO\",\"FULLNAME\",0).value.contains(\"John\") && Integer.parseInt(CDS.quantifierMap.get(\"CUSTOMER_INFO\",\"AGE\",0).value) > 21"
          ]
        result:
          $ref: "#/components/schemas/RuleResult"
      example: 
        {
          "name": "ruleX",
          "branchName": "ruleX.branch1",
          "type": "IF",
          "condition": [
              "CDS.quantifierMap.get(\"CUSTOMER_INFO\",\"FULLNAME\",0).value.contains(\"John\") && Integer.parseInt(CDS.quantifierMap.get(\"CUSTOMER_INFO\",\"AGE\",0).value) > 21"
          ],
          "result": {
            "name": "Result-X",
            "resultIndex": 0
          }          
        }


    RuleResult:
      description: |
        MonE Rules/DecisionTree Rule Result Type.<br>
      type: object
      properties: 
        name: 
          type: string
          example: "Result-X"
        resultIndex: 
          type: integer
          minimum: 0
        attribute: 
          $ref: "#/components/schemas/RuleAttribute"
        string: 
          type: string
          example: "string Result"
        action: 
          type: string
          example: "action Result"
        rule:
          type: array
          items: 
            $ref: "#/components/schemas/Rule"
      example:
        {
          "name": "Result-X",
          "attribute": {
            "name": "LinearRateFunction",
            "attribute": [
              {
                "attribute": [
                  {
                    "name": "m",
                    "value": "1.75"
                  },
                  {
                    "name": "c",
                    "value": "60"
                  },
                  {
                    "name": "round",
                    "value": "up"
                  }
                ]
              }
            ]
          }
        }


    RuleAttribute: 
      description: |
        MonE Rules/DecisionTree Generic Attribute (Name=>Value or Name=>Attribute Set) Data Model Definition.<br>
        **Only oneOf value or attribute must be provided.**<br>
        **value IGNORED, if attribute provided.**
      type: object
      properties: 
        name: 
          type: string
        value: 
          type: string
          example: "valueOfProperty"
        attribute:
          type: array
          items:
            $ref: "#/components/schemas/RuleAttributeItem"

    RuleAttributeItem:
      description: |
        MonE Rules/DecisionTree Generic Attribute (Name=>Value or Name=>Attribute Set) Data Model Definition.<br>
        **Only oneOf value or attribute must be provided.**<br>
        **value IGNORED, if attribute provided.**
      type: object
      properties: 
        name: 
          type: string
        value: 
          type: string
          example: "valueOfProperty"
        attribute:
          type: array
          items:
            $ref: "#/components/schemas/RuleAttributeItem"







#############################################################################
## 5.x. EXTERNAL COMMON DATA TYPE REFERENCES
#############################################################################

    Entity:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PRIVATE/common_tmforum_openapi_schemas.yaml#/components/schemas/Entity'
    EntityRef:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PRIVATE/common_tmforum_openapi_schemas.yaml#/components/schemas/EntityRef'
    RelatedEntityRef:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PRIVATE/common_tmforum_openapi_schemas.yaml#/components/schemas/RelatedEntityRef'
    RelatedEntity:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PRIVATE/common_tmforum_openapi_schemas.yaml#/components/schemas/RelatedEntity'
    Quantity:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PRIVATE/common_tmforum_openapi_schemas.yaml#/components/schemas/Quantity'

    ProductRef:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PRIVATE/common_tmforum_openapi_schemas.yaml#/components/schemas/ProductRef'

    ProductOfferingRef:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PRIVATE/common_tmforum_openapi_schemas.yaml#/components/schemas/ProductOfferingRef'

    TaxItem:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PRIVATE/common_tmforum_openapi_schemas.yaml#/components/schemas/TaxItem'
    AppliedBillingTaxRate:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PRIVATE/common_tmforum_openapi_schemas.yaml#/components/schemas/AppliedBillingTaxRate'
    PriceAlteration:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PRIVATE/common_tmforum_openapi_schemas.yaml#/components/schemas/PriceAlteration'
    Price:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PRIVATE/common_tmforum_openapi_schemas.yaml#/components/schemas/Price'

    TMFEvent:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PRIVATE/common_tmforum_openapi_schemas.yaml#/components/schemas/TMFEvent'
    TimePeriod:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PRIVATE/common_tmforum_openapi_schemas.yaml#/components/schemas/TimePeriod'
    Characteristic:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PRIVATE/common_tmforum_openapi_schemas.yaml#/components/schemas/Characteristic'
    Money:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PRIVATE/common_tmforum_openapi_schemas.yaml#/components/schemas/Money'



#############################################################################
## 6. SECURITY
#############################################################################
security:
  - JWT_Bearer: []
  - IAM_OAuth: []    

#############################################################################
## 7. TAGS
#############################################################################

#############################################################################
## 8. EXTERNAL DOCS
#############################################################################
externalDocs:
  description:
    Find more information here.
  url: https://monetizehub.io/docs/home/



#############################################################################
#############################################################################