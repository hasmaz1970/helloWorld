#############################################################################
## 1. OPENAPI
#############################################################################
openapi: 3.0.2

#############################################################################
## 2. INFO
#############################################################################
info:
  version: 1.0.0
  title: Peventhub
  contact:
    name: MonE Product Development
    
  license:
    name: GNU AGPLv3
    url: https://www.gnu.org/licenses/agpl-3.0.en.html
  description: |
    <!-- Note that this description is a MARKDOWN Block -->

    **PUBLIC WS (http-REST) API SPECIFICATION:**
      * **Reference Point Name:** Peventhub
      * **API Name:** Peventhub-Event Management
      * Utilizes TMFORUM Open API: TMF688-Event Management (v4)
    <br><br>
    ```
       _                            _              _   
      (_)_ __ ___  _ __   ___  _ __| |_ __ _ _ __ | |_ 
      | | '_ ` _ \| '_ \ / _ \| '__| __/ _` | '_ \| __|
      | | | | | | | |_) | (_) | |  | || (_| | | | | |_ 
      |_|_| |_| |_| .__/ \___/|_|   \__\__,_|_| |_|\__|
                  |_|                                                             
    ```
    **!!! THIS API SPECIFICATION PROVIDES THE OVERALL ACCESS PATTERNS and METHODS supported by MonE_Peventhub_Em Event Management Public API<br>**
    **!!! FOR AN ACTUAL LIST OF SUPPORTED {topicId} and events, please refer to the Schemas section below [DOMAIN]_EventTypes collections that shows supported events per domain
      * event
      * event hub/async callback notifications management
      * notification listeners (client side)

#############################################################################
## 3. SERVERS
#############################################################################
servers:
  - url: https://{environment}.monetizehub.io:{port}/public/peventhub
    description: The production API server
    variables:
      environment:
        enum:
          - 'dev'
          - 'test'
          - 'staging'
          - 'production'
        default: 'dev'
      port:
        enum:
          - '443'
          - '8443'
        default: '443'


tags:

  - name: topic management (N.A. generic ANY topic management  NOT IMPLEMENTED)
  - name: event publish/retrieve management
  - name: event hub/async callback notifications management
  - name: notification listeners (client side)

#############################################################################
## 4. PATHS
#############################################################################
paths:


#############################################################################

  /eventMessageBus/{version}/topic/{topicDomain}:

    post:
      operationId: createTopic
      summary: Creates a Topic
      description: This operation creates a Topic entity.
      tags:
        - topic management (N.A. generic ANY topic management  NOT IMPLEMENTED)

      parameters:

        - $ref: "#/components/parameters/version"        
        - $ref: "#/components/parameters/topicDomain"        
        - $ref: "#/components/parameters/site"
        - $ref: "#/components/parameters/company"
        - $ref: "#/components/parameters/channel"
        - $ref: "#/components/parameters/application"
        - $ref: "#/components/parameters/user"
        - $ref: "#/components/parameters/sessionId"
        - $ref: "#/components/parameters/businessInteractionId"
        - $ref: "#/components/parameters/transactionId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Topic"



      responses:
        201:
          description: "Created"
          headers:
            site:
              $ref:  "#/components/headers/site"
            company:
              $ref:  "#/components/headers/company"
            channel:
              $ref:  "#/components/headers/site"
            application:
              $ref:  "#/components/headers/application"
            user:
              $ref:  "#/components/headers/user"
            sessionId:
              $ref:  "#/components/headers/sessionId"
            businessInteractionId:
              $ref:  "#/components/headers/businessInteractionId"
            transactionId:
              $ref:  "#/components/headers/transactionId"
            Location:
              $ref: "#/components/headers/Location"
          content:
            'application/json':
              schema:
                type: object
                $ref: "#/components/schemas/Topic"

        400:
          $ref: "#/components/responses/Response400"
        401:
          $ref: "#/components/responses/Response401"
        403:
          $ref: "#/components/responses/Response403"
        405:
          $ref: "#/components/responses/Response405"
        406:
          $ref: "#/components/responses/Response406"
        409:
          $ref: "#/components/responses/Response409"
        410:
          $ref: "#/components/responses/Response410"
        413:
          $ref: "#/components/responses/Response413"
        414:
          $ref: "#/components/responses/Response414"
        415:
          $ref: "#/components/responses/Response415"
        422:
          $ref: "#/components/responses/Response422"
        429:
          $ref: "#/components/responses/Response429"
        500:
          $ref: "#/components/responses/Response500"
        501:
          $ref: "#/components/responses/Response501"
        502:
          $ref: "#/components/responses/Response502"
        503:
          $ref: "#/components/responses/Response503"
        504:
          $ref: "#/components/responses/Response504"


    get:
      operationId: listTopic
      summary: List or find Topic objects
      description: This operation list or find Topic entities
      tags:
        - topic management (N.A. generic ANY topic management  NOT IMPLEMENTED)

      parameters:

        - $ref: "#/components/parameters/version"        
        - $ref: "#/components/parameters/topicDomain"      
        - $ref: "#/components/parameters/site"
        - $ref: "#/components/parameters/company"
        - $ref: "#/components/parameters/channel"
        - $ref: "#/components/parameters/application"
        - $ref: "#/components/parameters/user"
        - $ref: "#/components/parameters/sessionId"
        - $ref: "#/components/parameters/businessInteractionId"
        - $ref: "#/components/parameters/transactionId"
        - $ref: "#/components/parameters/fields"
        - $ref: "#/components/parameters/limit"
        - $ref: "#/components/parameters/offset"
        - $ref: "#/components/parameters/sort"
        - $ref: "#/components/parameters/depth"
        - $ref: "#/components/parameters/expand"


      responses:
        200:
          description: "Success"
          headers:
            site:
              $ref:  "#/components/headers/site"
            company:
              $ref:  "#/components/headers/company"
            channel:
              $ref:  "#/components/headers/site"
            application:
              $ref:  "#/components/headers/application"
            user:
              $ref:  "#/components/headers/user"
            sessionId:
              $ref:  "#/components/headers/sessionId"
            businessInteractionId:
              $ref:  "#/components/headers/businessInteractionId"
            transactionId:
              $ref:  "#/components/headers/transactionId"
            X-Total-Count:
              $ref: "#/components/headers/X-Total-Count"

          content:
            'application/json':
              schema:
                type: array
                items: 
                  $ref: "#/components/schemas/Topic"

        206:
          description: "Partial Content"
          headers:
            site:
              $ref:  "#/components/headers/site"
            company:
              $ref:  "#/components/headers/company"
            channel:
              $ref:  "#/components/headers/site"
            application:
              $ref:  "#/components/headers/application"
            user:
              $ref:  "#/components/headers/user"
            sessionId:
              $ref:  "#/components/headers/sessionId"
            businessInteractionId:
              $ref:  "#/components/headers/businessInteractionId"
            transactionId:
              $ref:  "#/components/headers/transactionId"
            X-Total-Count:
              $ref: "#/components/headers/X-Total-Count"

          content:
            'application/json':
              schema:
                type: array
                items: 
                  $ref: "#/components/schemas/Topic"

        400:
          $ref: "#/components/responses/Response400"
        401:
          $ref: "#/components/responses/Response401"
        403:
          $ref: "#/components/responses/Response403"
        404:
          $ref: "#/components/responses/Response404"
        405:
          $ref: "#/components/responses/Response405"
        406:
          $ref: "#/components/responses/Response406"
        409:
          $ref: "#/components/responses/Response409"
        410:
          $ref: "#/components/responses/Response410"
        414:
          $ref: "#/components/responses/Response414"
        415:
          $ref: "#/components/responses/Response415"
        422:
          $ref: "#/components/responses/Response422"
        429:
          $ref: "#/components/responses/Response429"
        500:
          $ref: "#/components/responses/Response500"
        501:
          $ref: "#/components/responses/Response501"
        502:
          $ref: "#/components/responses/Response502"
        503:
          $ref: "#/components/responses/Response503"
        504:
          $ref: "#/components/responses/Response504"


  /eventMessageBus/{version}/topic/{topicDomain}/{topicId}:
    get:
      operationId: retrieveTopic
      summary: Retrieves a Topic by ID
      description: This operation retrieves a Topic entity. 
      tags:
        - topic management (N.A. generic ANY topic management  NOT IMPLEMENTED)
      parameters:
        - $ref: "#/components/parameters/version"        
        - $ref: "#/components/parameters/topicDomain"      
        - $ref: "#/components/parameters/topicId"
        
        - $ref: "#/components/parameters/site"
        - $ref: "#/components/parameters/company"
        - $ref: "#/components/parameters/channel"
        - $ref: "#/components/parameters/application"
        - $ref: "#/components/parameters/user"
        - $ref: "#/components/parameters/sessionId"
        - $ref: "#/components/parameters/businessInteractionId"
        - $ref: "#/components/parameters/transactionId"  
        - $ref: "#/components/parameters/fields"
        - $ref: "#/components/parameters/depth"
        - $ref: "#/components/parameters/expand"


      responses:
        200:
          description: "Success"
          headers:
            site:
              $ref:  "#/components/headers/site"
            company:
              $ref:  "#/components/headers/company"
            channel:
              $ref:  "#/components/headers/site"
            application:
              $ref:  "#/components/headers/application"
            user:
              $ref:  "#/components/headers/user"
            sessionId:
              $ref:  "#/components/headers/sessionId"
            businessInteractionId:
              $ref:  "#/components/headers/businessInteractionId"
            transactionId:
              $ref:  "#/components/headers/transactionId"
            X-Total-Count:
              $ref: "#/components/headers/X-Total-Count"

          content:
            'application/json':
              schema:
                type: object
                $ref: "#/components/schemas/Topic"
        400:
          $ref: "#/components/responses/Response400"
        401:
          $ref: "#/components/responses/Response401"
        403:
          $ref: "#/components/responses/Response403"
        404:
          $ref: "#/components/responses/Response404"
        405:
          $ref: "#/components/responses/Response405"
        406:
          $ref: "#/components/responses/Response406"
        409:
          $ref: "#/components/responses/Response409"
        410:
          $ref: "#/components/responses/Response410"
        414:
          $ref: "#/components/responses/Response414"
        415:
          $ref: "#/components/responses/Response415"
        422:
          $ref: "#/components/responses/Response422"
        429:
          $ref: "#/components/responses/Response429"
        500:
          $ref: "#/components/responses/Response500"
        501:
          $ref: "#/components/responses/Response501"
        502:
          $ref: "#/components/responses/Response502"
        503:
          $ref: "#/components/responses/Response503"
        504:
          $ref: "#/components/responses/Response504"

    delete:
      operationId: deleteTopic
      summary: Deletes a Topic
      description: This operation deletes a Topic entity.
      tags:
        - topic management (N.A. generic ANY topic management  NOT IMPLEMENTED)
      parameters:
        - $ref: "#/components/parameters/version"        
        - $ref: "#/components/parameters/topicDomain"      
        - $ref: "#/components/parameters/topicId"
        
        - $ref: "#/components/parameters/site"
        - $ref: "#/components/parameters/company"
        - $ref: "#/components/parameters/channel"
        - $ref: "#/components/parameters/application"
        - $ref: "#/components/parameters/user"
        - $ref: "#/components/parameters/sessionId"
        - $ref: "#/components/parameters/businessInteractionId"
        - $ref: "#/components/parameters/transactionId"  
      responses:
        204:
          description: "No Content in Response / Deleted"
          headers:
            site:
              $ref:  "#/components/headers/site"
            company:
              $ref:  "#/components/headers/company"
            channel:
              $ref:  "#/components/headers/site"
            application:
              $ref:  "#/components/headers/application"
            user:
              $ref:  "#/components/headers/user"
            sessionId:
              $ref:  "#/components/headers/sessionId"
            businessInteractionId:
              $ref:  "#/components/headers/businessInteractionId"
            transactionId:
              $ref:  "#/components/headers/transactionId"
        400:
          $ref: "#/components/responses/Response400"
        401:
          $ref: "#/components/responses/Response401"
        403:
          $ref: "#/components/responses/Response403"
        404:
          $ref: "#/components/responses/Response404"
        405:
          $ref: "#/components/responses/Response405"
        406:
          $ref: "#/components/responses/Response406"
        409:
          $ref: "#/components/responses/Response409"
        410:
          $ref: "#/components/responses/Response410"
        414:
          $ref: "#/components/responses/Response414"
        415:
          $ref: "#/components/responses/Response415"
        422:
          $ref: "#/components/responses/Response422"
        429:
          $ref: "#/components/responses/Response429"
        500:
          $ref: "#/components/responses/Response500"
        501:
          $ref: "#/components/responses/Response501"
        502:
          $ref: "#/components/responses/Response502"
        503:
          $ref: "#/components/responses/Response503"
        504:
          $ref: "#/components/responses/Response504"



#############################################################################

  /eventMessageBus/topic/{topicDomain}/{topicId}/{version}/event:


    post:
      operationId: publishEvent
      summary: Publish Event
      description: |
        This operation publishes Event to eventMessageBus

      tags:
        - event publish/retrieve management
      parameters:
        - $ref: "#/components/parameters/topicDomain"      
        - $ref: "#/components/parameters/topicId"    
        - $ref: "#/components/parameters/version"        
        - $ref: "#/components/parameters/site"
        - $ref: "#/components/parameters/company"
        - $ref: "#/components/parameters/channel"
        - $ref: "#/components/parameters/application"
        - $ref: "#/components/parameters/user"
        - $ref: "#/components/parameters/sessionId"
        - $ref: "#/components/parameters/businessInteractionId"
        - $ref: "#/components/parameters/transactionId"
      requestBody:
        description: publish Event
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Event"        


      responses:
        201:
          description: "Subscribed"
          headers:
            site:
              $ref:  "#/components/headers/site"
            company:
              $ref:  "#/components/headers/company"
            channel:
              $ref:  "#/components/headers/site"
            application:
              $ref:  "#/components/headers/application"
            user:
              $ref:  "#/components/headers/user"
            sessionId:
              $ref:  "#/components/headers/sessionId"
            businessInteractionId:
              $ref:  "#/components/headers/businessInteractionId"
            transactionId:
              $ref:  "#/components/headers/transactionId"
            Location:
              $ref: "#/components/headers/Location"
          content:
            'application/json':
              schema:
                type: object
                $ref: "#/components/schemas/EntityRef"

        400:
          $ref: "#/components/responses/Response400"
        401:
          $ref: "#/components/responses/Response401"
        403:
          $ref: "#/components/responses/Response403"
        404:
          $ref: "#/components/responses/Response403"
        405:
          $ref: "#/components/responses/Response405"
        409:
          $ref: "#/components/responses/Response409"
        500:
          $ref: "#/components/responses/Response500"
        501:
          $ref: "#/components/responses/Response501"
        502:
          $ref: "#/components/responses/Response502"
        503:
          $ref: "#/components/responses/Response503"
        504:
          $ref: "#/components/responses/Response504"

    get:
      operationId: retrieveEvent
      summary: Retrieve Event objects
      description: This operation retrieves Event entities
      tags:
        - event publish/retrieve management

      parameters:
        - $ref: "#/components/parameters/topicDomain"      
        - $ref: "#/components/parameters/topicId"    
        - $ref: "#/components/parameters/version"                 
        - $ref: "#/components/parameters/site"
        - $ref: "#/components/parameters/company"
        - $ref: "#/components/parameters/channel"
        - $ref: "#/components/parameters/application"
        - $ref: "#/components/parameters/user"
        - $ref: "#/components/parameters/sessionId"
        - $ref: "#/components/parameters/businessInteractionId"
        - $ref: "#/components/parameters/transactionId"
        - $ref: "#/components/parameters/fields"
        - $ref: "#/components/parameters/limit"
        - $ref: "#/components/parameters/offset"
        - $ref: "#/components/parameters/sort"
        - $ref: "#/components/parameters/depth"
        - $ref: "#/components/parameters/expand"


      responses:
        200:
          description: "Success"
          headers:
            site:
              $ref:  "#/components/headers/site"
            company:
              $ref:  "#/components/headers/company"
            channel:
              $ref:  "#/components/headers/site"
            application:
              $ref:  "#/components/headers/application"
            user:
              $ref:  "#/components/headers/user"
            sessionId:
              $ref:  "#/components/headers/sessionId"
            businessInteractionId:
              $ref:  "#/components/headers/businessInteractionId"
            transactionId:
              $ref:  "#/components/headers/transactionId"
            X-Total-Count:
              $ref: "#/components/headers/X-Total-Count"

          content:
            'application/json':
              schema:
                type: array
                items: 
                  $ref: "#/components/schemas/Event"

        206:
          description: "Partial Content"
          headers:
            site:
              $ref:  "#/components/headers/site"
            company:
              $ref:  "#/components/headers/company"
            channel:
              $ref:  "#/components/headers/site"
            application:
              $ref:  "#/components/headers/application"
            user:
              $ref:  "#/components/headers/user"
            sessionId:
              $ref:  "#/components/headers/sessionId"
            businessInteractionId:
              $ref:  "#/components/headers/businessInteractionId"
            transactionId:
              $ref:  "#/components/headers/transactionId"
            X-Total-Count:
              $ref: "#/components/headers/X-Total-Count"

          content:
            'application/json':
              schema:
                type: array
                items: 
                  $ref: "#/components/schemas/Event"

        400:
          $ref: "#/components/responses/Response400"
        401:
          $ref: "#/components/responses/Response401"
        403:
          $ref: "#/components/responses/Response403"
        404:
          $ref: "#/components/responses/Response404"
        405:
          $ref: "#/components/responses/Response405"
        406:
          $ref: "#/components/responses/Response406"
        409:
          $ref: "#/components/responses/Response409"
        410:
          $ref: "#/components/responses/Response410"
        414:
          $ref: "#/components/responses/Response414"
        415:
          $ref: "#/components/responses/Response415"
        422:
          $ref: "#/components/responses/Response422"
        429:
          $ref: "#/components/responses/Response429"
        500:
          $ref: "#/components/responses/Response500"
        501:
          $ref: "#/components/responses/Response501"
        502:
          $ref: "#/components/responses/Response502"
        503:
          $ref: "#/components/responses/Response503"
        504:
          $ref: "#/components/responses/Response504"  


  /eventMessageBus/topic/{topicDomain}/{topicId}/{version}/event/{id}:

    get:
      operationId: retrieve Event
      summary: Retrieves a Event by ID
      description: This operation retrieves a Event entity. 
      tags:
        - event publish/retrieve management
      parameters:
        - $ref: "#/components/parameters/topicDomain"      
        - $ref: "#/components/parameters/topicId"    
        - $ref: "#/components/parameters/version"
        - $ref: "#/components/parameters/id"
        
        - $ref: "#/components/parameters/site"
        - $ref: "#/components/parameters/company"
        - $ref: "#/components/parameters/channel"
        - $ref: "#/components/parameters/application"
        - $ref: "#/components/parameters/user"
        - $ref: "#/components/parameters/sessionId"
        - $ref: "#/components/parameters/businessInteractionId"
        - $ref: "#/components/parameters/transactionId"  
        - $ref: "#/components/parameters/fields"
        - $ref: "#/components/parameters/depth"
        - $ref: "#/components/parameters/expand"


      responses:
        200:
          description: "Success"
          headers:
            site:
              $ref:  "#/components/headers/site"
            company:
              $ref:  "#/components/headers/company"
            channel:
              $ref:  "#/components/headers/site"
            application:
              $ref:  "#/components/headers/application"
            user:
              $ref:  "#/components/headers/user"
            sessionId:
              $ref:  "#/components/headers/sessionId"
            businessInteractionId:
              $ref:  "#/components/headers/businessInteractionId"
            transactionId:
              $ref:  "#/components/headers/transactionId"
            X-Total-Count:
              $ref: "#/components/headers/X-Total-Count"

          content:
            'application/json':
              schema:
                type: object
                $ref: "#/components/schemas/Event"
        400:
          $ref: "#/components/responses/Response400"
        401:
          $ref: "#/components/responses/Response401"
        403:
          $ref: "#/components/responses/Response403"
        404:
          $ref: "#/components/responses/Response404"
        405:
          $ref: "#/components/responses/Response405"
        406:
          $ref: "#/components/responses/Response406"
        409:
          $ref: "#/components/responses/Response409"
        410:
          $ref: "#/components/responses/Response410"
        414:
          $ref: "#/components/responses/Response414"
        415:
          $ref: "#/components/responses/Response415"
        422:
          $ref: "#/components/responses/Response422"
        429:
          $ref: "#/components/responses/Response429"
        500:
          $ref: "#/components/responses/Response500"
        501:
          $ref: "#/components/responses/Response501"
        502:
          $ref: "#/components/responses/Response502"
        503:
          $ref: "#/components/responses/Response503"
        504:
          $ref: "#/components/responses/Response504"

#############################################################################

  /eventMessageBus/topic/{topicDomain}/{topicId}/{version}/hub:

    post:
      operationId: registerListener
      summary: Register a listener
      description: |
        Sets the communication endpoint address the service instance must
        use to deliver information about its health state, execution state,
        failures and metrics.
      tags:
        - event hub/async callback notifications management
      parameters:
        - $ref: "#/components/parameters/topicDomain"      
        - $ref: "#/components/parameters/topicId"    
        - $ref: "#/components/parameters/version"      
        
        - $ref: "#/components/parameters/site"
        - $ref: "#/components/parameters/company"
        - $ref: "#/components/parameters/channel"
        - $ref: "#/components/parameters/application"
        - $ref: "#/components/parameters/user"
        - $ref: "#/components/parameters/sessionId"
        - $ref: "#/components/parameters/businessInteractionId"
        - $ref: "#/components/parameters/transactionId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Hub"

      responses:
        201:
          description: "Created"
          headers:
            site:
              $ref:  "#/components/headers/site"
            company:
              $ref:  "#/components/headers/company"
            channel:
              $ref:  "#/components/headers/site"
            application:
              $ref:  "#/components/headers/application"
            user:
              $ref:  "#/components/headers/user"
            sessionId:
              $ref:  "#/components/headers/sessionId"
            businessInteractionId:
              $ref:  "#/components/headers/businessInteractionId"
            transactionId:
              $ref:  "#/components/headers/transactionId"
            Location:
              $ref: "#/components/headers/Location"
          content:
            'application/json':
              schema:
                type: object
                $ref: "#/components/schemas/Hub"

        400:
          $ref: "#/components/responses/Response400"
        401:
          $ref: "#/components/responses/Response401"
        403:
          $ref: "#/components/responses/Response403"
        405:
          $ref: "#/components/responses/Response405"
        406:
          $ref: "#/components/responses/Response406"
        409:
          $ref: "#/components/responses/Response409"
        410:
          $ref: "#/components/responses/Response410"
        413:
          $ref: "#/components/responses/Response413"
        414:
          $ref: "#/components/responses/Response414"
        415:
          $ref: "#/components/responses/Response415"
        422:
          $ref: "#/components/responses/Response422"
        429:
          $ref: "#/components/responses/Response429"
        500:
          $ref: "#/components/responses/Response500"
        501:
          $ref: "#/components/responses/Response501"
        502:
          $ref: "#/components/responses/Response502"
        503:
          $ref: "#/components/responses/Response503"
        504:
          $ref: "#/components/responses/Response504"


    get:
      operationId: listHub
      summary: List or find Hub objects
      description: This operation list or find Hub entities
      tags:
        - event hub/async callback notifications management

      parameters:
        - $ref: "#/components/parameters/topicDomain"      
        - $ref: "#/components/parameters/topicId"    
        - $ref: "#/components/parameters/version"                  
        
        - $ref: "#/components/parameters/site"
        - $ref: "#/components/parameters/company"
        - $ref: "#/components/parameters/channel"
        - $ref: "#/components/parameters/application"
        - $ref: "#/components/parameters/user"
        - $ref: "#/components/parameters/sessionId"
        - $ref: "#/components/parameters/businessInteractionId"
        - $ref: "#/components/parameters/transactionId"
        - $ref: "#/components/parameters/fields"
        - $ref: "#/components/parameters/limit"
        - $ref: "#/components/parameters/offset"
        - $ref: "#/components/parameters/sort"
        - $ref: "#/components/parameters/depth"
        - $ref: "#/components/parameters/expand"


      responses:
        200:
          description: "Success"
          headers:
            site:
              $ref:  "#/components/headers/site"
            company:
              $ref:  "#/components/headers/company"
            channel:
              $ref:  "#/components/headers/site"
            application:
              $ref:  "#/components/headers/application"
            user:
              $ref:  "#/components/headers/user"
            sessionId:
              $ref:  "#/components/headers/sessionId"
            businessInteractionId:
              $ref:  "#/components/headers/businessInteractionId"
            transactionId:
              $ref:  "#/components/headers/transactionId"
            X-Total-Count:
              $ref: "#/components/headers/X-Total-Count"

          content:
            'application/json':
              schema:
                type: array
                items: 
                  $ref: "#/components/schemas/Hub"

        206:
          description: "Partial Content"
          headers:
            site:
              $ref:  "#/components/headers/site"
            company:
              $ref:  "#/components/headers/company"
            channel:
              $ref:  "#/components/headers/site"
            application:
              $ref:  "#/components/headers/application"
            user:
              $ref:  "#/components/headers/user"
            sessionId:
              $ref:  "#/components/headers/sessionId"
            businessInteractionId:
              $ref:  "#/components/headers/businessInteractionId"
            transactionId:
              $ref:  "#/components/headers/transactionId"
            X-Total-Count:
              $ref: "#/components/headers/X-Total-Count"

          content:
            'application/json':
              schema:
                type: array
                items: 
                  $ref: "#/components/schemas/Hub"

        400:
          $ref: "#/components/responses/Response400"
        401:
          $ref: "#/components/responses/Response401"
        403:
          $ref: "#/components/responses/Response403"
        404:
          $ref: "#/components/responses/Response404"
        405:
          $ref: "#/components/responses/Response405"
        406:
          $ref: "#/components/responses/Response406"
        409:
          $ref: "#/components/responses/Response409"
        410:
          $ref: "#/components/responses/Response410"
        414:
          $ref: "#/components/responses/Response414"
        415:
          $ref: "#/components/responses/Response415"
        422:
          $ref: "#/components/responses/Response422"
        429:
          $ref: "#/components/responses/Response429"
        500:
          $ref: "#/components/responses/Response500"
        501:
          $ref: "#/components/responses/Response501"
        502:
          $ref: "#/components/responses/Response502"
        503:
          $ref: "#/components/responses/Response503"
        504:
          $ref: "#/components/responses/Response504"

  /eventMessageBus/topic/{topicDomain}/{topicId}/{version}/hub/{id}:
    get:
      operationId: retrieveHub
      summary: Retrieves a Hub by ID
      description: This operation retrieves a Hub entity. 
      tags:
        - event hub/async callback notifications management
      parameters:
        - $ref: "#/components/parameters/topicDomain"      
        - $ref: "#/components/parameters/topicId"    
        - $ref: "#/components/parameters/version"                  

        - $ref: "#/components/parameters/id"        
        - $ref: "#/components/parameters/site"
        - $ref: "#/components/parameters/company"
        - $ref: "#/components/parameters/channel"
        - $ref: "#/components/parameters/application"
        - $ref: "#/components/parameters/user"
        - $ref: "#/components/parameters/sessionId"
        - $ref: "#/components/parameters/businessInteractionId"
        - $ref: "#/components/parameters/transactionId"  
        - $ref: "#/components/parameters/fields"
        - $ref: "#/components/parameters/depth"
        - $ref: "#/components/parameters/expand"


      responses:
        200:
          description: "Success"
          headers:
            site:
              $ref:  "#/components/headers/site"
            company:
              $ref:  "#/components/headers/company"
            channel:
              $ref:  "#/components/headers/site"
            application:
              $ref:  "#/components/headers/application"
            user:
              $ref:  "#/components/headers/user"
            sessionId:
              $ref:  "#/components/headers/sessionId"
            businessInteractionId:
              $ref:  "#/components/headers/businessInteractionId"
            transactionId:
              $ref:  "#/components/headers/transactionId"
            X-Total-Count:
              $ref: "#/components/headers/X-Total-Count"

          content:
            'application/json':
              schema:
                type: object
                $ref: "#/components/schemas/Hub"
        400:
          $ref: "#/components/responses/Response400"
        401:
          $ref: "#/components/responses/Response401"
        403:
          $ref: "#/components/responses/Response403"
        404:
          $ref: "#/components/responses/Response404"
        405:
          $ref: "#/components/responses/Response405"
        406:
          $ref: "#/components/responses/Response406"
        409:
          $ref: "#/components/responses/Response409"
        410:
          $ref: "#/components/responses/Response410"
        414:
          $ref: "#/components/responses/Response414"
        415:
          $ref: "#/components/responses/Response415"
        422:
          $ref: "#/components/responses/Response422"
        429:
          $ref: "#/components/responses/Response429"
        500:
          $ref: "#/components/responses/Response500"
        501:
          $ref: "#/components/responses/Response501"
        502:
          $ref: "#/components/responses/Response502"
        503:
          $ref: "#/components/responses/Response503"
        504:
          $ref: "#/components/responses/Response504"

    delete:
      operationId: unregisterListener, deleteHub
      summary: Unregister a listener, deleteHub
      description: |
        Resets the communication endpoint address the service instance must
        use to deliver information about its health state, execution state,
        failures and metrics.
      tags:
        - event hub/async callback notifications management
      parameters:
        - $ref: "#/components/parameters/topicDomain"      
        - $ref: "#/components/parameters/topicId"    
        - $ref: "#/components/parameters/version"                 
        - $ref: "#/components/parameters/id"
        
        - $ref: "#/components/parameters/site"
        - $ref: "#/components/parameters/company"
        - $ref: "#/components/parameters/channel"
        - $ref: "#/components/parameters/application"
        - $ref: "#/components/parameters/user"
        - $ref: "#/components/parameters/sessionId"
        - $ref: "#/components/parameters/businessInteractionId"
        - $ref: "#/components/parameters/transactionId"  
      responses:
        204:
          description: "No Content in Response / Deleted"
          headers:
            site:
              $ref:  "#/components/headers/site"
            company:
              $ref:  "#/components/headers/company"
            channel:
              $ref:  "#/components/headers/site"
            application:
              $ref:  "#/components/headers/application"
            user:
              $ref:  "#/components/headers/user"
            sessionId:
              $ref:  "#/components/headers/sessionId"
            businessInteractionId:
              $ref:  "#/components/headers/businessInteractionId"
            transactionId:
              $ref:  "#/components/headers/transactionId"
        400:
          $ref: "#/components/responses/Response400"
        401:
          $ref: "#/components/responses/Response401"
        403:
          $ref: "#/components/responses/Response403"
        404:
          $ref: "#/components/responses/Response404"
        405:
          $ref: "#/components/responses/Response405"
        406:
          $ref: "#/components/responses/Response406"
        409:
          $ref: "#/components/responses/Response409"
        410:
          $ref: "#/components/responses/Response410"
        414:
          $ref: "#/components/responses/Response414"
        415:
          $ref: "#/components/responses/Response415"
        422:
          $ref: "#/components/responses/Response422"
        429:
          $ref: "#/components/responses/Response429"
        500:
          $ref: "#/components/responses/Response500"
        501:
          $ref: "#/components/responses/Response501"
        502:
          $ref: "#/components/responses/Response502"
        503:
          $ref: "#/components/responses/Response503"
        504:
          $ref: "#/components/responses/Response504"
          
#############################################################################


  /listener/Event:
    post:
      operationId: "listener-{XYZ_Resource}Event"
      summary: "Client listener for {XYZ_Resource}entity updates"
      tags:
        - "notification listeners (client side)"
      parameters:
        - $ref: "#/components/parameters/site"
        - $ref: "#/components/parameters/company"
        - $ref: "#/components/parameters/channel"
        - $ref: "#/components/parameters/application"
        - $ref: "#/components/parameters/user"
        - $ref: "#/components/parameters/sessionId"
        - $ref: "#/components/parameters/businessInteractionId"
        - $ref: "#/components/parameters/transactionId"
      requestBody:
        description: Event Data
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Event"        


      responses:
        201:
          description: "Notified"
          headers:
            site:
              $ref:  "#/components/headers/site"
            company:
              $ref:  "#/components/headers/company"
            channel:
              $ref:  "#/components/headers/site"
            application:
              $ref:  "#/components/headers/application"
            user:
              $ref:  "#/components/headers/user"
            sessionId:
              $ref:  "#/components/headers/sessionId"
            businessInteractionId:
              $ref:  "#/components/headers/businessInteractionId"
            transactionId:
              $ref:  "#/components/headers/transactionId"
            Location:
              $ref: "#/components/headers/Location"
          content:
            'application/json':
              schema:
                type: object
                $ref: "#/components/schemas/Hub"

        400:
          $ref: "#/components/responses/Response400"
        401:
          $ref: "#/components/responses/Response401"
        403:
          $ref: "#/components/responses/Response403"
        404:
          $ref: "#/components/responses/Response403"
        405:
          $ref: "#/components/responses/Response405"
        500:
          $ref: "#/components/responses/Response500"
        501:
          $ref: "#/components/responses/Response501"
        502:
          $ref: "#/components/responses/Response502"
        503:
          $ref: "#/components/responses/Response503"
        504:
          $ref: "#/components/responses/Response504"


#############################################################################
## 5. COMPONENTS
#############################################################################
components:

#############################################################################
## 5.x. SECURITY SCHEMES
#############################################################################
  securitySchemes:
    JWT_Bearer:
      type: http
      scheme: bearer 
      bearerFormat: JWT
    IAM_OAuth:
      type: oauth2
      description: |
        **OAuth Grant Type: Password Credentials**
      flows:
        password:
          tokenUrl: https://iam.monetizehub.io/oauth/v1/token
          scopes:
            write:resources: modify resources
            read:resources: read resources


#############################################################################
## 5.x. HEADERS
#############################################################################
  headers:

    site:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/headers/site'
    company:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/headers/company'
    channel:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/headers/channel'
    application:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/headers/application'
    user:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/headers/user'
    sessionId:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/headers/sessionId'
    businessInteractionId:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/headers/businessInteractionId'
    transactionId:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/headers/transactionId'
    X-Total-Count:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/headers/X-Total-Count'
    Location:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/headers/Location'



#############################################################################
## 5.x. PARAMETERS
#############################################################################
  parameters:
    id:
      name: id
      in: path
      description: ID of Entity
      required: true
      schema:
        type: string

    topicDomain:
      name: topicDomain
      in: path
      description: Domain of Topic
      required: true
      schema:
        type: string
        enum:
          - padmin
          - pchg 
          - pacct
          - pom
          - pbill 
          - pfin 
          - pbal 
          - pdatex
          - pbatch 
          - peventhub

    topicId:
      name: topicId
      in: path
      description: ID of Topic
      required: true
      schema:
        type: string
        enum:
          - accountManagement
          - billingAdmin
          - chargingAdmin 
          - customerBillManagement 
          - offlineCharging
          - payment 
          - paymentMethod 
          - productOrderingManagement
          - prepayBalanceManagement
          - billingBalanceManagement


    version:
      name: version
      in: path
      description: Version of Entity Payload
      required: true
      schema:
        type: string
        default: v4

    site:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/parameters/site'
    company:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/parameters/company'
    channel:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/parameters/channel'
    application:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/parameters/application'
    user:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/parameters/user'
    sessionId:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/parameters/sessionId'
    businessInteractionId:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/parameters/businessInteractionId'
    transactionId:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/parameters/transactionId'   
    fields:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/parameters/fields'
    limit:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/parameters/limit'
    offset:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/parameters/offset'
    sort:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/parameters/sort'
    depth:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/parameters/depth'
    expand:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/parameters/expand'


#############################################################################
## 5.x. RESPONSES
#############################################################################


  responses:

    Response400:
      $ref:  '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/responses/Response400'
    Response401:
      $ref:  '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/responses/Response401'
    Response403:
      $ref:  '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/responses/Response403'
    Response404:
      $ref:  '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/responses/Response404'
    Response405:
      $ref:  '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/responses/Response405'
    Response406:
      $ref:  '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/responses/Response406'
    Response409:
      $ref:  '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/responses/Response409'
    Response410:
      $ref:  '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/responses/Response410'
    Response411:
      $ref:  '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/responses/Response411'
    Response412:
      $ref:  '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/responses/Response412'
    Response413:
      $ref:  '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/responses/Response413'
    Response414:
      $ref:  '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/responses/Response414'
    Response415:
      $ref:  '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/responses/Response415'
    Response422:
      $ref:  '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/responses/Response422'
    Response429:
      $ref:  '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/responses/Response429'
    Response500:
      $ref:  '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/responses/Response500'
    Response501:
      $ref:  '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/responses/Response501'
    Response502:
      $ref:  '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/responses/Response502'
    Response503:
      $ref:  '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/responses/Response503'
    Response504:
      $ref:  '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/common_public_ws_api_schemas.yaml#/components/responses/Response504'




#############################################################################
## 5.x. SCHEMA DEFINITIONS
#############################################################################
  schemas:

#############################################################################

#############################################################################
##  5.x Event TYPES
#############################################################################



#############################################################################
##  5.x Event TYPES
#############################################################################


    AccountManagement_EventsType:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/Pacct_Mgmt.yaml#/components/schemas/AccountManagement_EventsType'
    BillingAdmin_EventsType:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/Padmin_Billing.yaml#/components/schemas/BillingAdmin_EventsType'
    ChargingAdmin_EventsType:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/Padmin_Chg.yaml#/components/schemas/ChargingAdmin_EventsType'
    CustomerBillManagement_EventsType:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/Pbill_Mgmt.yaml#/components/schemas/CustomerBillManagement_EventsType'
    OfflineCharging_EventsType:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/Pchg_Offline.yaml#/components/schemas/OfflineCharging_EventsType'
    Payment_EventsType:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/Pfin_Payment.yaml#/components/schemas/Payment_EventsType'
    PaymentMethod_EventsType:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/Pfin_PayMethods.yaml#/components/schemas/PaymentMethod_EventsType'
    ProductOrderingManagement_EventsType:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/Pom_Order.yaml#/components/schemas/ProductOrderingManagement_EventsType'
    AccountBalanceManagement_EventsType:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PUBLIC/Pbal_Account.yaml#/components/schemas/AccountBalanceManagement_EventsType'


#############################################################################
## 5.x. EXTERNAL COMMON DATA TYPE REFERENCES
#############################################################################

    Entity:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PRIVATE/common_tmforum_openapi_schemas.yaml#/components/schemas/Entity'
    EntityRef:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PRIVATE/common_tmforum_openapi_schemas.yaml#/components/schemas/EntityRef'
    RelatedEntityRef:
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PRIVATE/common_tmforum_openapi_schemas.yaml#/components/schemas/RelatedEntityRef'
    Characteristic:  
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PRIVATE/common_tmforum_openapi_schemas.yaml#/components/schemas/Characteristic'
    Topic:  
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PRIVATE/common_tmforum_openapi_schemas.yaml#/components/schemas/Topic'



    Hub:  
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PRIVATE/common_tmforum_openapi_schemas.yaml#/components/schemas/Hub'
    Event:  
      $ref: '/INTERFACES/API-SPECIFICATION/YAML/PRIVATE/common_private_type_schemas.yaml#/components/schemas/Event'


#############################################################################
## 5.x. EXTERNAL COMMON API TYPE REFERENCES
#############################################################################


#############################################################################
## 6. SECURITY
#############################################################################
security:
  - JWT_Bearer: []
  - IAM_OAuth: []    

#############################################################################
## 7. TAGS
#############################################################################

#############################################################################
## 8. EXTERNAL DOCS
#############################################################################
externalDocs:
  description:
    Find more information here.
  url: https://monetizehub.io/docs/home/



#############################################################################
#############################################################################      